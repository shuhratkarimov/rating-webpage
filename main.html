<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Musobaqa uchun</title>
    <link
      rel="icon"
      href="https://cdn-icons-png.flaticon.com/128/15379/15379746.png"
      type="image/x-icon"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bungee+Spice&family=Heebo:wght@100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: sans-serif;
        background: #eef2f3;
        text-align: center;
        margin: 0;
        padding: 0;
        transition: background-color 1s ease; /* Silliq o‚Äòzgarish uchun */
      }
      h1 {
        margin-top: 20px;
        animation: fadeIn 1s ease-out;
      }

      .group {
        background-color: #ffffff88;
        border-radius: 12px;
        padding: 15px;
        margin-bottom: 20px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      ul {
        list-style-type: none;
        padding-left: 0;
        margin-top: 10px;
      }

      .student-name {
        background: #e0f7fa;
        margin: 5px 0;
        padding: 8px 12px;
        border-radius: 8px;
        font-weight: 500;
        color: #00796b;
        transition: background 0.3s ease;
      }

      .student-name:hover {
        background: #b2ebf2;
      }

      .no-student {
        color: #aaa;
        font-style: italic;
        margin-top: 5px;
      }

      #ranking {
        margin: 20px auto;
        width: 300px;
        padding: 10px;
        background: #fff;
        border-radius: 10px;
        box-shadow: 30px 30px 20px rgb(82, 82, 99);
        opacity: 0;
        animation: fadeInUp 1s ease-out forwards;
      }

      .group {
        background: #fff;
        display: inline-block;
        margin: 15px 15px;
        box-shadow: 30px 30px 20px rgb(82, 82, 99);
        padding: 20px;
        width: 320px;
        border-radius: 10px;
        transform: translateY(50px);
        opacity: 0;
        animation: slideIn 1s ease-out forwards;
        transition: transform 0.3s ease-in-out;
      }

      .group:hover {
        transform: scale(1.05);
        opacity: 1 !important;
      }

      .score {
        font-size: 36px;
        margin: 10px 0;
        color: #3e8e41;
        transition: color 0.3s ease;
      }

      .score:hover {
        color: #ff5733;
        opacity: 1;
      }

      button {
        padding: 8px 12px;
        margin: 5px;
        font-size: 16px;
        cursor: pointer;
        border: none;
        border-radius: 5px;
        transition: transform 0.2s ease;
      }

      button:hover {
        transform: scale(1.1);
        background-color: #3498db;
        color: white;
        opacity: 1;
      }
      /* Rangli doira effekti uchun stillar */

      /* Fon qatlamlari uchun stillar */
      .background-layer {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1; /* Kontentdan orqada bo‚Äòlishi uchun */
        transition: opacity 1s ease; /* Silliq opacity o‚Äòzgarishi */
      }

      .layer-1 {
        opacity: 1; /* Birinchi qatlam dastlab ko‚Äòrinadi */
      }

      .layer-2 {
        opacity: 0; /* Ikkinchi qatlam dastlab ko‚Äòrinmaydi */
      }

      /* Tebranish animatsiyasi */
      @keyframes wiggle {
        0% {
          transform: rotate(0deg);
        }
        25% {
          transform: rotate(45deg);
        }
        50% {
          transform: rotate(-45deg);
        }
        75% {
          transform: rotate(45eg);
        }
        100% {
          transform: rotate(0deg);
        }
      }

      .score.active {
        animation: wiggle 0.5s ease; /* Ochko qo‚Äòshilganda tebranish */
      }

      /* Qushlar uchun stillar */
      .bird {
        position: absolute;
        font-size: 24px;
        pointer-events: none;
        animation: fly 2s ease forwards;
      }

      /* Qushlarning uchish animatsiyasi */
      @keyframes fly {
        0% {
          opacity: 1;
          transform: translate(1, -20px) rotate(0deg);
        }
        30% {
          opacity: 1;
          transform: translate(0, -60px) rotate(30deg);
        }
        50% {
          opacity: 1;
          transform: translate(0, -20px) rotate(20deg); /* Birinchi 1 soniya muallaq turadi */
        }
        100% {
          opacity: 0;
          transform: translate(
              calc(100px * var(--dx)),
              calc(-200px + 100px * var(--dy))
            )
            rotate(200deg);
        }
      }
      /* Doiralarning yo‚Äòqolish animatsiyasi */
      @keyframes fadeOut {
        0% {
          opacity: 0.7;
        }
        100% {
          opacity: 0;
        }
      }

      /* Doiralarning harakatlanish animatsiyasi */
      @keyframes move {
        0% {
          transform: translate(0, 0);
        }
        100% {
          transform: translate(calc(50px * var(--dx)), calc(50px * var(--dy)));
        }
      }

      /* Animations */
      @keyframes fadeIn {
        0% {
          opacity: 0;
        }
        100% {
          opacity: 1;
        }
      }

      @keyframes fadeInUp {
        0% {
          opacity: 0;
          transform: translateY(20px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideIn {
        0% {
          opacity: 0;
          transform: translateY(50px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }

      li {
        opacity: 0;
        animation: fadeIn 0.5s ease-out forwards;
      }

      li:nth-child(odd) {
        animation-delay: 0.2s;
      }

      li:nth-child(even) {
        animation-delay: 0.4s;
      }
    </style>
  </head>
  <body>
    <h1 style="font-family: Bungee Spice">üèÜ Fullstack XN1 üí™</h1>
    <button
      id="resetButton"
      style="
        padding: 10px 20px;
        box-shadow: 30px 30px 20px rgb(82, 82, 99);
        font-size: 16px;
        cursor: pointer;
        background-color: #ff4d4d;
        color: white;
        border: none;
        border-radius: 5px;
        margin-bottom: 20px;
      "
    >
      Hammasini Reset Qilish
    </button>
    <div class="background-layer layer-1"></div>
    <div class="background-layer layer-2"></div>
    <div id="ranking">
      <h3>üîù Hozirgi Reyting:</h3>
      <ul id="rankingList" style="list-style: none; padding: 0"></ul>
    </div>

    <div id="groupsContainer"></div>

    <script>
      const groupNames = ["Kod ustalariüí™", "Haqiqiy Fullstack'chilarüòé", "Doim birinchilar1Ô∏è‚É£"];
      const scores = {};

      // LocalStorage'dan o'qish
      groupNames.forEach((name) => {
        const stored = localStorage.getItem(name);
        scores[name] = stored ? parseInt(stored) : 0;
      });
      const container = document.getElementById("groupsContainer");

      function createGroupUI(name) {
        console.log(`Creating UI for: ${name}`); // Debugging

        const groupNumber = name.split("-")[0];
        const students =
          JSON.parse(localStorage.getItem(`group${groupNumber}`)) || [];

        const div = document.createElement("div");
        div.className = "group";
        const studentListHTML = students.length
          ? students
              .map(
                (student) => `<li class="student-name">${student.trim()}</li>`
              )
              .join("")
          : `<li class="no-student">Dasturchi yo'q</li>`;

        div.innerHTML = `
    <h2>${name}</h2>
    <div class="score" id="score-${name}">${scores[name]}</div>
    <button onclick="addScore('${name}', 10)">+10</button>
    <button onclick="addScore('${name}', 5)">+5</button>
    <button onclick="addScore('${name}', -5)">-5</button>
    <h4>Dasturchilar:</h4>
    <ul id="students-${groupNumber}">${studentListHTML}</ul>
    <button onclick="clearStudents('${groupNumber}')">Dasturchilarni tozalash</button>
  `;
        container.appendChild(div);
      }

      function renderRanking() {
        const list = document.getElementById("rankingList");
        list.innerHTML = "";
        const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
        sorted.forEach(([name, score], index) => {
          const li = document.createElement("li");
          const medal =
            index === 0 ? "ü•á" : index === 1 ? "ü•à" : index === 2 ? "ü•â" : "";
          li.textContent = `${medal} ${name}: ${score} ball`;
          list.appendChild(li);
        });
      }

      window.addScore = function (name, amount) {
        scores[name] += amount;
        const scoreElement = document.getElementById(`score-${name}`);
        scoreElement.innerText = scores[name];
        scoreElement.classList.add("active");

        const rect = scoreElement.getBoundingClientRect();
        // 3 ta qush yaratish
        for (let i = 0; i < 7; i++) {
          const bird = document.createElement("div");
          bird.className = "bird";
          bird.innerText = "Malades fullstack!üòäüëç";
          bird.style.left = `${rect.left + rect.width / 2 - 12}px`;
          bird.style.top = `${rect.top - 12}px`;

          const dx = Math.random() * 2;
          const dy = Math.random() * 2 - 4;
          bird.style.setProperty("--dx", dx);
          bird.style.setProperty("--dy", dy);

          document.body.appendChild(bird);

          setTimeout(() => {
            bird.remove();
          }, 3000);
        }

        localStorage.setItem(name, scores[name]);
        renderRanking();
      };
      // Reset funksiyasi
      function resetScores() {
        groupNames.forEach((name) => {
          scores[name] = 0; // Har bir guruhning ballini 0 ga o‚Äòrnatish
          localStorage.setItem(name, 0); // LocalStorage'da yangilash
          const scoreElement = document.getElementById(`score-${name}`);
          if (scoreElement) {
            scoreElement.innerText = 0; // UI'da ballarni yangilash
          }
        });
        renderRanking(); // Reyting ro‚Äòyxatini yangilash
      }

      // Reset tugmasiga hodisa qo‚Äòshish
      document
        .getElementById("resetButton")
        .addEventListener("click", resetScores);

      // Boshlanishda UI yasash
      groupNames.forEach((name) => createGroupUI(name));
      renderRanking();

      const layer1 = document.querySelector(".layer-1");
      const layer2 = document.querySelector(".layer-2");
      let isLayer1Active = true; // Qaysi qatlam faol ekanligini kuzatish

      // Tasodifiy gradient generatsiya qilish funksiyasi
      function getRandomGradient() {
        const r1 = Math.floor(Math.random() * 255);
        const g1 = Math.floor(Math.random() * 255);
        const b1 = Math.floor(Math.random() * 255);
        const r2 = Math.floor(Math.random() * 255);
        const g2 = Math.floor(Math.random() * 255);
        const b2 = Math.floor(Math.random() * 255);
        const r3 = Math.floor(Math.random() * 255);
        const g3 = Math.floor(Math.random() * 255);
        const b3 = Math.floor(Math.random() * 255);
        const r4 = Math.floor(Math.random() * 255);
        const g4 = Math.floor(Math.random() * 255);
        const b4 = Math.floor(Math.random() * 255);
        return `linear-gradient(200deg, rgb(${r1}, ${g1}, ${b1}), rgb(${r2}, ${g2}, ${b2}), rgb(${r3}, ${g3}, ${b3}), rgb(${r4}, ${g4}, ${b4}))`;
      }

      // Dastlabki gradientni o‚Äòrnatish
      layer1.style.background = getRandomGradient();

      // Har 3 soniyada gradientni o‚Äòzgartirish
      setInterval(() => {
        if (isLayer1Active) {
          // Layer 2 ga yangi gradientni qo‚Äòyish va ko‚Äòrsatish
          layer2.style.background = getRandomGradient();
          layer2.style.opacity = 1;
          layer1.style.opacity = 0;
        } else {
          // Layer 1 ga yangi gradientni qo‚Äòyish va ko‚Äòrsatish
          layer1.style.background = getRandomGradient();
          layer1.style.opacity = 1;
          layer2.style.opacity = 0;
        }
        isLayer1Active = !isLayer1Active; // Qatlamni almashish
      }, 10000);

      function clearStudents(groupNumber) {
        localStorage.removeItem(`group${groupNumber}`);
        const studentListElement = document.getElementById(
          `students-${groupNumber}`
        );
        if (studentListElement) {
          studentListElement.innerHTML = "<li>Dasturchi yo'q</li>";
        }
      }
    </script>
  </body>
</html>
